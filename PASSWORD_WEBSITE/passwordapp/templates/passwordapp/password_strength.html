{% extends 'passwordapp/base.html' %}

{% block title %}Password Strength Checker{% endblock %}

{% block content %}
<h1>Password Strength Checker</h1>
{% if not generated %}
<form method="post">
    {% csrf_token %}
    <div class="form-group">
        <label for="password">Enter the password:</label>
        <input type="password" name="password" id="password" class="form-control" required>
    </div>
    <button type="submit" class="btn btn-success">Check Strength</button>
</form>
{% endif %}
{% if password %}
<h2 class="mt-5">Password Report</h2>
<ul class="list-group">
    <li class="list-group-item">Your password is: <strong>{{ password }}</strong></li>
    <li class="list-group-item">It has <strong>{{ lowercas }}</strong> lowercase letters</li>
    <li class="list-group-item">It has <strong>{{ uppercas }}</strong> uppercase letters</li>
    <li class="list-group-item">It has <strong>{{ num }}</strong> numbers</li>
    <li class="list-group-item">It has <strong>{{ wsp }}</strong> blank spaces</li>
    <li class="list-group-item">It has <strong>{{ splchar }}</strong> special characters</li>
</ul>
<div class="mt-4">
    <p>Password Strength: <strong>{{ strength_message }}</strong></p>
    <div class="progress">
        <div class="progress-bar {{ strength_color }}" role="progressbar" style="width: {{ strength_score|add:"0" }}0%" aria-valuenow="{{ strength_score }}" aria-valuemin="0" aria-valuemax="5">{{ strength_score }}/5</div>
    </div>
</div>
<form method="post" action="{% url 'download_strength_report' %}" class="mt-3">
    {% csrf_token %}
    <input type="hidden" name="password" value="{{ password }}">
    <input type="hidden" name="lowercas" value="{{ lowercas }}">
    <input type="hidden" name="uppercas" value="{{ uppercas }}">
    <input type="hidden" name="num" value="{{ num }}">
    <input type="hidden" name="wsp" value="{{ wsp }}">
    <input type="hidden" name="splchar" value="{{ splchar }}">
    <input type="hidden" name="strength_message" value="{{ strength_message }}">
    <input type="hidden" name="strength_score" value="{{ strength_score }}">
    <button type="submit" class="btn btn-secondary">Download Report</button>
</form>
{% endif %}
<a class="btn btn-secondary mt-3" href="{% url 'menu' %}">Back</a>
{% endblock %}
